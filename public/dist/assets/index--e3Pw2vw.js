import{r as u,E as J,j as e,B as A,S as oe,k as ie,M as le}from"./index-C-veA1Rv.js";import{u as Q}from"./useApi-hqwvaQFr.js";import{L as ce,a as B,C as de,M as ue}from"./multiStepFlow-C657kt1P.js";import{u as pe}from"./TabPanel-B4NRPBBp.js";import{G as O}from"./Grid-DnwqgOY3.js";import{F as V,I as z,S as q,a as se,T as X}from"./TextField-CH6IKT9T.js";import{M as b}from"./KeyboardArrowRight-BWjR8Xyf.js";import{T as l}from"./Typography-DNw0gmHs.js";import{B as ee}from"./Button-BUtGUVw6.js";import{L as G}from"./ListItem-gwl459xM.js";import{C as Z,a as me}from"./modal-Cq9y4NFa.js";import{u as ye}from"./useUserdetails-B_CkXpGQ.js";import{u as he,T as xe,d as ge}from"./TransactionTable-QW0Nu1id.js";import{S as ve}from"./statusBadge-hmSZ3RLa.js";import{A as ne}from"./Alert-DQH5iZfd.js";import{P as ae}from"./ButtonBase-DHTngUyU.js";import"./useTheme-CSbpYfTu.js";import"./Grow-DEkHVcDO.js";import"./useIsFocusVisible-SVz0b4Hl.js";import"./listItemButtonClasses-CYKo87jA.js";import"./tslib.es6-xyAoBO8G.js";import"./dividerClasses-D34xdAHQ.js";import"./DataGridFooter-CqbU6PzW.js";import"./Tooltip-BeN_8m-j.js";import"./FormControlLabel-X_ttzFaA.js";import"./Toolbar-u8AobN1J.js";import"./index-B9-GP8Fy.js";import"./iconBase-Bz53TZrF.js";import"./useSlot-Db2Wk8V8.js";const Ce=(n,s)=>{switch(s.type){case"SET_INVESTMENT_TYPE":return{...n,investmentType:s.payload};case"SET_INDUSTRY":return{...n,industry:s.payload};case"SET_SELECTED_COMPANY":return{...n,selectedCompany:s.payload.name,selectedCompanyId:s.payload.id};case"SET_AMOUNT":return{...n,amount:s.payload};case"SET_FIAT_CURRENCY":return{...n,fiatCurrency:s.payload};case"SET_CRYPTO_TYPE":return{...n,cryptoType:s.payload};case"SET_INDUSTRIES":return{...n,industries:s.payload};default:return n}},fe=()=>{const n=localStorage.getItem("investmentForm");if(n)try{const s=JSON.parse(n);return console.log("Loaded initial state from localStorage:",s),{investmentType:s.investmentType||"",industry:s.industry||"",selectedCompany:s.selectedCompany||"",selectedCompanyId:s.selectedCompanyId||"",amount:s.amount||"",fiatCurrency:s.fiatCurrency||"",cryptoType:s.cryptoType||"",industries:s.industries||[]}}catch(s){console.error("Error parsing localStorage data:",s)}return{investmentType:"",industry:"",selectedCompany:"",selectedCompanyId:"",amount:"",fiatCurrency:"",cryptoType:"",industries:[]}},je=(n,s,C)=>{const[o,d]=u.useReducer(Ce,fe()),[U,h]=u.useState({open:!1,title:"",message:"",isError:!1}),{data:p,error:S,loading:x,callApi:m}=Q(),{error:y,loading:c,callApi:E}=Q(),{callApi:D}=Q(),_=["USD","EUR","GBP","CAD"];return u.useEffect(()=>{(async()=>{try{await m({url:J.ALL_INDUSTRIES_CATEGORIES,method:"GET"})}catch(a){console.error("Error fetching industries:",a)}})()},[m]),u.useEffect(()=>{(async()=>{if(o.industry)try{const a=await E({url:`${J.COMPANY_BY_INDUSTRIES}/${o.industry}`,method:"GET"});d({type:"SET_INDUSTRIES",payload:a||[]}),!(a||[]).some(f=>f._id===o.selectedCompanyId)&&o.selectedCompanyId&&(console.log("Resetting invalid selectedCompany:",o.selectedCompanyId),d({type:"SET_SELECTED_COMPANY",payload:{name:"",id:""}}))}catch(a){console.error("Error fetching companies by industry:",a)}else d({type:"SET_INDUSTRIES",payload:[]}),o.selectedCompanyId&&d({type:"SET_SELECTED_COMPANY",payload:{name:"",id:""}})})()},[o.industry,E]),u.useEffect(()=>{console.log("Saving state to localStorage:",o),localStorage.setItem("investmentForm",JSON.stringify(o))},[o]),{state:o,allIndustries:p,industriesLoading:x,industriesError:S,companiesLoading:c,companiesError:y,setInvestmentType:t=>d({type:"SET_INVESTMENT_TYPE",payload:t}),setIndustry:t=>d({type:"SET_INDUSTRY",payload:t}),setSelectedCompany:(t,a)=>d({type:"SET_SELECTED_COMPANY",payload:{name:t,id:a}}),setAmount:t=>d({type:"SET_AMOUNT",payload:t}),setFiatCurrency:t=>d({type:"SET_FIAT_CURRENCY",payload:t}),setCryptoType:t=>d({type:"SET_CRYPTO_TYPE",payload:t}),handleInvest:async()=>{var W,v,R;if(!o.selectedCompany||!o.amount||o.investmentType==="fiat"&&!o.fiatCurrency||o.investmentType==="crypto"&&!o.cryptoType||!s){h({open:!0,title:"Validation Error",message:"Please fill in all required fields, including proof of payment.",isError:!0});return}if(!n){h({open:!0,title:"Authentication Error",message:"User ID is missing. Please log in and try again.",isError:!0});return}const t=parseFloat(o.amount);if(isNaN(t)||t<=0){h({open:!0,title:"Validation Error",message:"Please enter a valid investment amount.",isError:!0});return}if(o.investmentType==="fiat"&&!_.includes(o.fiatCurrency)){h({open:!0,title:"Validation Error",message:`Unsupported fiat currency: ${o.fiatCurrency}. Please select a valid currency (USD, EUR, GBP, CAD).`,isError:!0});return}const a=new FormData;a.append("companyName",o.selectedCompany),a.append("userId",n),a.append("amount",t.toString()),a.append("currencyType",o.investmentType),o.investmentType==="fiat"&&a.append("fiatCurrency",o.fiatCurrency),o.investmentType==="crypto"&&a.append("cryptoCurrency",o.cryptoType.toLowerCase()),C&&a.append("paymentAccountId",C);const T={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"},f=(W=s.name.split(".").pop())==null?void 0:W.toLowerCase();if(!f||!["jpg","jpeg","png","webp"].includes(f)){h({open:!0,title:"File Error",message:"Invalid file format. Please upload a JPG, PNG, or WEBP file.",isError:!0});return}const K=T[f],Y=s.name.includes(".")?s.name:`proof.${f}`,$=new File([s],Y,{type:K});a.append("proof",$);try{const j=await D({url:J.TRANSACTIONS,method:"POST",body:a,headers:{}});if(console.log("Investment submitted:",Object.fromEntries(a),"Response:",j),j!=null&&j.success)localStorage.removeItem("investmentForm"),h({open:!0,title:"Success",message:"Investment submitted successfully!",isError:!1});else throw new Error("No proof URL received")}catch(j){console.error("Error submitting investment:",j);const H=j;h({open:!0,title:"Submission Error",message:((R=(v=H.response)==null?void 0:v.data)==null?void 0:R.message)||H.message||"Failed to submit investment. Please try again.",isError:!0})}},modalState:U,handleCloseModal:()=>{h({open:!1,title:"",message:"",isError:!1})}}},Te=({state:n,allIndustries:s,paymentProof:C,paymentProofDropzone:o,setInvestmentType:d,setIndustry:U,setAmount:h,setFiatCurrency:p,setCryptoType:S,handleCompanyChange:x,paymentAccounts:m,selectedPaymentAccountId:y,setSelectedPaymentAccountId:c})=>{const E=t=>!!t&&["image/jpeg","image/png","image/webp"].includes(t.type),[D,_]=u.useState(null),P=t=>{_(D===t?null:t)},F=t=>{c(t.target.value)},g=m.find(t=>t._id===y),I=m.some(t=>t.currency==="usd"),N=m.some(t=>t.currency==="usdt"),w=Array.from(new Set(m.filter(t=>t.currency==="usd").map(()=>"USD"))),M=Array.from(new Set(m.filter(t=>t.currency==="usdt"&&t.network).map(t=>{var a;switch((a=t.network)==null?void 0:a.toLowerCase()){case"erc":return"USDT";case"eth":return"ETH";case"btc":return"BTC";default:return""}}).filter(t=>t!=="")));u.useEffect(()=>{n.investmentType==="fiat"&&!I?(d(""),p("")):n.investmentType==="crypto"&&!N&&(d(""),S("")),n.fiatCurrency&&!w.includes(n.fiatCurrency)&&p(""),n.cryptoType&&!M.includes(n.cryptoType)&&S("")},[m,n.investmentType,n.fiatCurrency,n.cryptoType,I,N,w,M,d,p,S]);const k=[{id:"investmentType",label:"Investment Type",type:"select",value:n.investmentType,options:[...I?[{value:"fiat",label:"Fiat"}]:[],...N?[{value:"crypto",label:"Crypto"}]:[]],onChange:t=>{const a=t.target.value;d(a),p(""),S("")},disabled:!I&&!N},{id:n.investmentType==="crypto"?"cryptoType":"fiatCurrency",label:n.investmentType==="crypto"?"Crypto Currency":"Fiat Currency",type:"select",value:n.investmentType==="crypto"?n.cryptoType:n.fiatCurrency,options:n.investmentType==="crypto"?M.map(t=>({value:t,label:t==="BTC"?"Bitcoin (BTC)":t==="ETH"?"Ethereum (ETH)":"Tether (USDT)"})):w.map(t=>({value:t,label:t==="USD"?"US Dollar (USD)":t})),onChange:t=>n.investmentType==="crypto"?S(t.target.value):p(t.target.value),disabled:n.investmentType==="crypto"?!M.length:!w.length},{id:"amount",label:"Investment Amount",type:"text",value:n.amount,onChange:t=>h(t.target.value)}];return[{label:"Select Industry & Company",content:e.jsx(A,{children:e.jsxs(O,{container:!0,spacing:2,children:[e.jsx(O,{item:!0,xs:12,children:e.jsxs(V,{fullWidth:!0,disabled:!s,children:[e.jsx(z,{children:"Industry"}),e.jsx(q,{value:n.industry,label:"Industry",onChange:t=>U(t.target.value),children:s&&s.length?s.map(t=>e.jsx(b,{value:t,children:t},t)):e.jsx(b,{disabled:!0,children:"No industries available"})})]})}),n.industry&&n.industries.length>0?e.jsxs(O,{item:!0,xs:12,children:[e.jsxs(V,{fullWidth:!0,sx:{my:3},children:[e.jsx(z,{children:"Company"}),e.jsx(q,{value:n.selectedCompany,onChange:x,label:"Company",children:n.industries.map(t=>e.jsx(b,{value:t.name,children:t.name},t._id))})]}),e.jsx(se,{sx:{maxHeight:"300px",overflowY:"auto",border:"1px solid #e0e0e0",borderRadius:"4px"},children:n.industries.map(t=>e.jsxs(A,{children:[e.jsx(ce,{selected:n.selectedCompanyId===t._id,onClick:()=>P(t._id),sx:{"&.Mui-selected":{backgroundColor:"#e3f2fd"}},children:e.jsx(B,{primary:t.name,secondary:`Location: ${t.location}`})}),e.jsx(de,{in:D===t._id,timeout:"auto",unmountOnExit:!0,children:e.jsxs(A,{sx:{p:2,bgcolor:"#f5f5f5",display:"flex",flexDirection:"column",gap:2},children:[t.logoUrl&&t.logoUrl!=="string"?e.jsx("img",{src:t.logoUrl,alt:`${t.name} logo`,style:{maxWidth:"100px",maxHeight:"100px",marginBottom:"8px"}}):null,e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Description:"})," ",t.description||"No description available"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Industry:"})," ",t.industry]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Location:"})," ",t.location]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Established:"})," ",t.establishedYear]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Total Fiat Investment:"})," $",t.totalFiatInvestment]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Total Crypto Investment:"})," $",t.totalCryptoInvestment]}),e.jsx(ee,{variant:"contained",color:"primary",sx:{mt:2},onClick:()=>{x({target:{value:t.name}})},children:"Invest"})]})})]},t._id))})]}):n.industry?e.jsx(O,{item:!0,xs:12,children:e.jsx(l,{color:"textSecondary",children:"No companies available for this industry."})}):null]})}),validate:()=>!!n.industry&&!!n.selectedCompany&&!!n.selectedCompanyId},{label:"Investment Details",content:e.jsxs(A,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Enter Investment Details"}),e.jsxs(O,{container:!0,spacing:2,children:[k.map(t=>{var a;return e.jsx(O,{item:!0,xs:12,mt:3,children:t.type==="select"?e.jsxs(V,{fullWidth:!0,children:[e.jsx(z,{children:t.label}),e.jsx(q,{value:t.value,label:t.label,onChange:t.onChange,children:(a=t.options)!=null&&a.length?t.options.map(T=>e.jsx(b,{value:T.value,children:T.label},T.value)):e.jsx(b,{disabled:!0,children:"No options available"})})]}):e.jsx(X,{fullWidth:!0,label:t.label,type:"number",value:t.value,onChange:T=>t.onChange(T),variant:"outlined"})},t.id)}),e.jsxs(O,{item:!0,xs:12,mt:3,children:[e.jsxs(V,{fullWidth:!0,sx:{mb:2},children:[e.jsx(z,{children:"Payment Account"}),e.jsx(q,{value:y,onChange:F,label:"Payment Account",children:m.length===0?e.jsx(b,{value:"",disabled:!0,children:"No payment accounts available"}):m.map(t=>{var a;return e.jsxs(b,{value:t._id,children:[t.currency.toUpperCase()," -"," ",t.currency==="usd"?`${t.accountName} (${t.bankName})`:`${(a=t.walletAddress)==null?void 0:a.substring(0,8)}... (${t.network})`]},t._id)})})]}),g?e.jsx(se,{children:g.currency==="usd"?e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx(B,{primary:"Bank",secondary:g.bankName||"Not available"})}),e.jsx(G,{children:e.jsx(B,{primary:"Account Name",secondary:g.accountName||"Not available"})}),e.jsx(G,{children:e.jsx(B,{primary:"Account Number",secondary:g.accountNumber||"Not available"})}),e.jsx(G,{children:e.jsx(B,{primary:"Swift Code",secondary:g.bankSwiftCode||"Not available"})}),e.jsxs(l,{variant:"caption",color:"textSecondary",children:["Transfer ",n.amount," ",n.fiatCurrency," to this account."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx(B,{primary:"Wallet Address",secondary:g.walletAddress||"Not available"})}),e.jsx(G,{children:e.jsx(B,{primary:"Network",secondary:g.network||"Not available"})}),e.jsxs(l,{variant:"caption",color:"textSecondary",children:["Send ",n.amount," ",n.cryptoType," to this address."]})]})}):e.jsx(l,{color:"textSecondary",children:"Please select a payment account to view payment details."})]})]})]}),validate:()=>!!n.investmentType&&(n.investmentType==="crypto"?!!n.cryptoType:!!n.fiatCurrency)&&!!n.amount&&parseFloat(n.amount)>0&&(m.length===0||!!y)},{label:"Upload Proof",content:e.jsxs(A,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Upload Payment Proof"}),e.jsxs(A,{...o.getRootProps(),sx:{border:"2px dashed #ccc",padding:2,textAlign:"center",bgcolor:o.isDragActive?"#f0f0f0":"transparent",cursor:"pointer"},children:[e.jsx("input",{...o.getInputProps()}),C?e.jsxs(oe,{direction:"row",spacing:2,alignItems:"center",justifyContent:"center",children:[E(C)&&e.jsx("img",{src:URL.createObjectURL(C),alt:"Proof Preview",style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx(l,{children:C.name})]}):e.jsx(l,{children:"Drag or click to upload payment proof (JPEG, PNG, WEBP)"})]})]}),validate:()=>!!C}]},be=()=>{const[n,s]=u.useState(""),[C,o]=u.useState(!1),[d,U]=u.useState(!1),[h,p]=u.useState(!1),[S,x]=u.useState(""),[m,y]=u.useState("success"),[c,E]=u.useState(null),[D,_]=u.useState(0),[P,F]=u.useState("fiat"),[g,I]=u.useState(""),[N,w]=u.useState(""),{error:M,loading:k,callApi:t}=Q(),a=ie(r=>r.user.user),T=(a==null?void 0:a._id)||"",{transactions:f}=he(a),K=f.map(r=>({_id:r._id,amount:r.amount,createdAt:r.createdAt instanceof Date?r.createdAt:new Date(r.createdAt||Date.now()),status:r.status==="completed"?"successful":r.status==="pending"?"pending":r.status==="failed"?"failed":"canceled",companyName:r.companyName||"Unknown",type:"transaction",currency:r.cryptoCurrency||(r.currencyType==="fiat"?"usd":void 0)})).filter(r=>r._id.toLowerCase().includes(n.toLowerCase())||r.companyName.toLowerCase().includes(n.toLowerCase())||r.status.toLowerCase().includes(n.toLowerCase())),Y=r=>{const i=f.find(L=>L._id===r);E(i||null),o(!0)},$=()=>{o(!1),E(null)},W=r=>{const i=f.find(L=>L._id===r);i&&(E(i),_(i.amount),F(i.currencyType),I(i.cryptoCurrency||""),w(i.transactionDetails||""),U(!0))},v=()=>{U(!1),E(null),_(0),F("fiat"),I(""),w("")},R=()=>{p(!1),x(""),y("success")},j=async r=>{try{const i=await t({url:`${J.TRANSACTIONS}/cancel/${r}`,method:"POST",body:{transactionId:r}});x(i.message||`Transaction with ID ${r} has been canceled.`),y("success"),p(!0),$()}catch(i){const L=i.status===400?i.message||"Invalid request data.":i.status===403?"Unauthorized action.":i.status===404?"Transaction not found.":i.status===503?"Database error. Please try again later.":"Failed to cancel transaction.";x(L),y("error"),p(!0)}},H=async()=>{if(!c||!T){x("No transaction selected or user not found."),y("error"),p(!0);return}if(D<=0){x("Amount must be greater than 0."),y("error"),p(!0);return}if(P==="crypto"&&!g){x("Please select a cryptocurrency for crypto transactions."),y("error"),p(!0);return}const r={transactionId:c._id,amount:D,currencyType:P,cryptoCurrency:P==="crypto"&&g||void 0,transactionDetails:N||void 0};try{const i=await t({url:`${J.TRANSACTIONS}/${c._id}`,method:"PUT",body:r});x(i.message||"Transaction updated successfully."),y("success"),p(!0),v()}catch(i){const L=i.status===400?i.message||"Invalid request data.":i.status===403?"Unauthorized action.":i.status===404?"Transaction not found.":i.status===503?"Database error. Please try again later.":"Failed to update transaction.";x(L),y("error"),p(!0)}},re=r=>{const i=[{icon:"eva:eye-fill",label:"View Details",onClick:()=>Y(r._id)}];return r.status==="pending"&&i.push({icon:"eva:edit-fill",label:"Edit Transaction",onClick:()=>W(r._id)},{icon:"eva:close-circle-fill",label:"Cancel Transaction",onClick:()=>j(r._id)}),i};return e.jsxs(A,{children:[e.jsx(l,{variant:"h4",mb:3,children:"Investment History"}),e.jsx(X,{label:"Search by Company or Status",variant:"outlined",value:n,onChange:r=>s(r.target.value),fullWidth:!0,sx:{mb:3,maxWidth:400}}),e.jsx(A,{height:500,children:e.jsx(xe,{searchText:n,itemsPerPage:10,transactions:K,actions:r=>{const i=f.find(L=>L._id===r._id);return i?re(i):[]}})}),e.jsx(Z,{open:C,title:"Transaction Details",onCancel:$,noConfirm:!0,children:c?e.jsxs(me,{children:[e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Transaction ID:"})," ",c.transactionId]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Amount:"})," ",c.amount]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Status:"})," ",e.jsx(ve,{status:c.status,children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Company:"})," ",c.companyName]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Currency Type:"})," ",c.currencyType]}),c.cryptoCurrency&&e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Cryptocurrency:"})," ",c.cryptoCurrency.toUpperCase()]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Date:"})," ",ge(c.createdAt).format("MMM DD, YYYY HH:mm")]}),re(c).map((r,i)=>e.jsx(ee,{variant:"contained",color:r.label==="Cancel Transaction"?"error":"primary",onClick:r.onClick,sx:{mt:2},children:r.label},i))]}):e.jsx(l,{children:"No details available"})}),e.jsx(Z,{open:d,title:"Edit Transaction",onCancel:v,onConfirm:H,noConfirm:!1,children:c?e.jsxs(A,{sx:{py:2,display:"flex",flexDirection:"column",gap:5},children:[e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Transaction ID:"})," ",c._id]}),e.jsx(X,{label:"Amount",type:"number",value:D,onChange:r=>_(Number(r.target.value)),fullWidth:!0,required:!0}),e.jsxs(V,{fullWidth:!0,children:[e.jsx(z,{id:"currency-type-label",children:"Currency Type"}),e.jsxs(q,{labelId:"currency-type-label",value:P,label:"Currency Type",onChange:r=>F(r.target.value),children:[e.jsx(b,{value:"fiat",children:"Fiat"}),e.jsx(b,{value:"crypto",children:"Crypto"})]})]}),P==="crypto"&&e.jsxs(V,{fullWidth:!0,children:[e.jsx(z,{id:"crypto-currency-label",children:"Cryptocurrency"}),e.jsxs(q,{labelId:"crypto-currency-label",value:g,label:"Cryptocurrency",onChange:r=>I(r.target.value),children:[e.jsx(b,{value:"btc",children:"BTC"}),e.jsx(b,{value:"eth",children:"ETH"}),e.jsx(b,{value:"usdt",children:"USDT"})]})]}),e.jsx(X,{label:"Transaction Details",value:N,onChange:r=>w(r.target.value),fullWidth:!0,multiline:!0,rows:3}),M&&e.jsx(l,{color:"error",variant:"body2",children:M.message}),k&&e.jsx(l,{variant:"body2",children:"Submitting transaction update..."})]}):e.jsx(l,{children:"No transaction selected"})}),e.jsx(Z,{open:h,title:m==="success"?"Success":"Error",onCancel:R,onConfirm:R,noConfirm:!1,children:e.jsx(l,{variant:"body1",color:m==="success"?"success.main":"error.main",sx:{py:2},children:S})})]})},Ze=()=>{const n=ye(),s=n==null?void 0:n._id,[C,o]=u.useState(!1),[d,U]=u.useState(null),[h,p]=u.useState(""),{data:S,loading:x,error:m,callApi:y}=Q();u.useEffect(()=>{C&&s&&y({url:J.PAYMENT_ACCOUNTS,method:"GET"})},[C,s,y]);const{state:c,allIndustries:E,industriesLoading:D,industriesError:_,companiesLoading:P,companiesError:F,setInvestmentType:g,setIndustry:I,setSelectedCompany:N,setAmount:w,setFiatCurrency:M,setCryptoType:k,handleInvest:t,modalState:a,handleCloseModal:T}=je(s??null,d,h),f=pe({onFileAccepted:v=>{console.log("Payment Proof:",{name:v.name,type:v.type,size:v.size}),U(v)},onFileRejected:v=>{console.log("Payment Proof rejected:",v),alert(`Upload failed: ${v}`)},maxCompressedSizeMB:5}),te=v=>{if(!c.industry){alert("Please select an industry first.");return}const R=v.target.value,j=c.industries.find(H=>H.name===R);j&&N(j.name,j._id)},K=()=>{if(!s){alert("Please log in to start an investment.");return}o(!0)},Y=()=>{o(!1),U(null),p("")},$=async()=>{console.log("Investment Flow Completed:",{userId:s,...c,paymentProof:(d==null?void 0:d.name)||"Not uploaded",selectedPaymentAccountId:h}),await t(),Y()},W=Te({state:c,allIndustries:E,paymentProof:d,paymentProofDropzone:f,setInvestmentType:g,setIndustry:I,setSelectedCompany:N,setAmount:w,setFiatCurrency:M,setCryptoType:k,handleCompanyChange:te,paymentAccounts:S||[],selectedPaymentAccountId:h,setSelectedPaymentAccountId:p});return D||P||x?e.jsx(le,{sx:{display:"block",margin:"auto",mt:4}}):_?e.jsx(ne,{severity:"error",children:_.message}):F?e.jsx(ne,{severity:"error",children:F.message}):m?e.jsx(ne,{severity:"error",children:m.message}):e.jsxs(A,{sx:{minHeight:"100%",pt:4},children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Investment Opportunities"}),e.jsx(ae,{elevation:3,children:e.jsx(O,{container:!0,spacing:3,children:e.jsx(O,{item:!0,xs:12,children:e.jsx(ee,{variant:"contained",color:"primary",onClick:K,children:"Invest"})})})}),e.jsx(be,{}),C&&e.jsx(A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1300},children:e.jsxs(ae,{sx:{p:3,maxWidth:"600px",width:"100%",maxHeight:"80vh",overflowY:"auto"},children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:"Investment Process"}),e.jsx(ue,{steps:W,onSubmit:$}),e.jsx(ee,{variant:"outlined",onClick:Y,sx:{mt:2,backgroundColor:"#D32F2F",border:"none",textAlign:"right"},children:"Cancel"})]})}),e.jsx(Z,{open:a.open,title:a.title,onCancel:T,noConfirm:!0,children:e.jsx(l,{color:a.isError?"error":"success",children:a.message})})]})};export{Ze as default};
