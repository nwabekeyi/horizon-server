import{j as e,B as c,r as M,F as Q,l as ue,E as k,Y as _e,X as Te,Z as ne}from"./index-C-veA1Rv.js";import{c as X,d as j,F as xe,a as Ae}from"./index-B9-GP8Fy.js";import{C as O,a as Z}from"./modal-Cq9y4NFa.js";import{F as K,I as B,S as V,T as S}from"./TextField-CH6IKT9T.js";import{M as f}from"./KeyboardArrowRight-BWjR8Xyf.js";import{T as n}from"./Typography-DNw0gmHs.js";import{u as z}from"./useApi-hqwvaQFr.js";import{I as J}from"./InputAdornment-BVYIlHg7.js";import{I as R}from"./Grow-DEkHVcDO.js";import{C as he}from"./Card-DUZ4M9b6.js";import{B as F}from"./Button-BUtGUVw6.js";const fe=({open:a,editingPaymentDetail:r,paymentType:t,paymentCurrency:o,bankName:y,accountNumber:T,accountName:d,cryptoAddress:i,network:g,paymentError:x,loading:A,apiError:m,dispatch:E,onCancel:D,onConfirm:u})=>e.jsx(O,{open:a,title:r?"Edit Payment Details":"Add Payment Details",onCancel:D,onConfirm:u,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:4},children:[e.jsxs(K,{fullWidth:!0,children:[e.jsx(B,{id:"payment-type-label",children:"Payment Type"}),e.jsxs(V,{labelId:"payment-type-label",value:t,label:"Payment Type",onChange:s=>E({type:"SET_PAYMENT_TYPE",payload:s.target.value}),"aria-label":"Select payment type",children:[e.jsx(f,{value:"fiat",children:"Fiat"}),e.jsx(f,{value:"crypto",children:"Crypto"})]})]}),e.jsxs(K,{fullWidth:!0,children:[e.jsx(B,{id:"currency-label",children:"Currency"}),e.jsx(V,{labelId:"currency-label",value:o,label:"Currency",onChange:s=>E({type:"SET_PAYMENT_CURRENCY",payload:s.target.value}),"aria-label":"Select currency",children:t==="fiat"?["usd","cad","eur","gbp"].map(s=>e.jsx(f,{value:s,children:s.toUpperCase()},s)):["btc","eth","usdt"].map(s=>e.jsx(f,{value:s,children:s.toUpperCase()},s))})]}),t==="fiat"?e.jsxs(e.Fragment,{children:[e.jsx(S,{fullWidth:!0,label:"Bank Name",value:y,onChange:s=>E({type:"SET_BANK_NAME",payload:s.target.value}),"aria-label":"Bank name"}),e.jsx(S,{fullWidth:!0,label:"Account Number",value:T,onChange:s=>E({type:"SET_ACCOUNT_NUMBER",payload:s.target.value}),"aria-label":"Account number"}),e.jsx(S,{fullWidth:!0,label:"Account Name",value:d,onChange:s=>E({type:"SET_ACCOUNT_NAME",payload:s.target.value}),"aria-label":"Account name"})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{fullWidth:!0,label:"Crypto Address",value:i,onChange:s=>E({type:"SET_CRYPTO_ADDRESS",payload:s.target.value}),"aria-label":"Crypto address"}),e.jsxs(K,{fullWidth:!0,children:[e.jsx(B,{id:"network-label",children:"Network (Optional)"}),e.jsxs(V,{labelId:"network-label",value:g,label:"Network (Optional)",onChange:s=>E({type:"SET_NETWORK",payload:s.target.value}),"aria-label":"Select network",children:[e.jsx(f,{value:"",children:"None"}),["erc20","trc20","bep20","polygon","solana"].map(s=>e.jsx(f,{value:s,children:s.toUpperCase()},s))]})]})]}),(x||m)&&e.jsx(n,{variant:"caption",color:"error",children:x||(m==null?void 0:m.message)}),A&&e.jsx(n,{variant:"caption",color:"text.secondary",children:"Submitting..."})]})}),Re=({open:a,paymentError:r,onCancel:t,onConfirm:o})=>e.jsx(O,{open:a,title:"Confirm Delete",onCancel:t,onConfirm:o,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(n,{variant:"body1",color:"text.primary",children:"Are you sure you want to delete this payment detail? This action cannot be undone."}),r&&e.jsx(n,{variant:"caption",color:"error",children:r})]})}),Se=({open:a,kycDocumentType:r,kycError:t,dispatch:o,onCancel:y,onConfirm:T})=>e.jsx(O,{open:a,title:"Add KYC Details",onCancel:y,onConfirm:T,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(K,{fullWidth:!0,children:[e.jsx(B,{id:"document-type-label",children:"Document Type"}),e.jsxs(V,{labelId:"document-type-label",value:r,label:"Document Type",onChange:d=>o({type:"SET_KYC_DOCUMENT_TYPE",payload:d.target.value}),"aria-label":"Select document type",children:[e.jsx(f,{value:"driver_license",children:"Driver's License"}),e.jsx(f,{value:"passport",children:"Passport"}),e.jsx(f,{value:"national_id",children:"National ID Card"})]})]}),e.jsx(n,{variant:"body2",fontWeight:"medium",color:"text.primary",children:"Document Front"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d=>{var i;return o({type:"SET_DOCUMENT_FRONT",payload:((i=d.target.files)==null?void 0:i[0])||null})},style:{marginBottom:16},"aria-label":"Upload document front"}),e.jsx(n,{variant:"body2",fontWeight:"medium",color:"text.primary",children:"Document Back"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d=>{var i;return o({type:"SET_DOCUMENT_BACK",payload:((i=d.target.files)==null?void 0:i[0])||null})},style:{marginBottom:16},"aria-label":"Upload document back"}),e.jsx(n,{variant:"body2",fontWeight:"medium",color:"text.primary",children:"Address Proof"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d=>{var i;return o({type:"SET_ADDRESS_PROOF",payload:((i=d.target.files)==null?void 0:i[0])||null})},style:{marginBottom:16},"aria-label":"Upload address proof"}),t&&e.jsx(n,{variant:"caption",color:"error",children:t})]})}),Oe=({open:a,user:r,twoFASecret:t,twoFAError:o,showConfirmation:y,responseMessage:T,loading:d,apiError:i,showUpdateFlow:g,passwordConfirmed:x,dispatch:A,onCancel:m,onConfirm:E,onConfirmationClose:D})=>{const[u,s]=M.useState(!1),[I,b]=M.useState(!1),[q,P]=M.useState(""),[$,w]=M.useState(!1),{error:C,loading:G,callApi:v}=z();M.useEffect(()=>{g&&(x&&(r!=null&&r._id)?v({url:`${Q}/request-update`,method:"POST",body:{userId:r._id}}).then(_=>{P(_.message),w(!0)}).catch(_=>{console.error("Error updating 2FA secret:",_),P((C==null?void 0:C.message)||"Failed to request 2FA update"),w(!0)}):b(!0),A({type:"SET_TWO_FA_UPDATE_REQUESTED",payload:!1}),A({type:"SET_PASSWORD_CONFIRMED",payload:!1}))},[g,x,r,v,C,A]);const Y=()=>{s(_=>!_)},W=()=>{b(!1),m()},H=()=>{b(!1),m()},L=()=>{w(!1),P(""),m()};return e.jsxs(e.Fragment,{children:[e.jsx(O,{open:a,title:y?"2FA Setup Confirmation":r&&r.twoFA&&r.twoFA.enabled?"Disable 2FA":"Enable 2FA",onCancel:y?D:m,onConfirm:y?D:E,children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:y?e.jsx(n,{variant:"body1",color:"text.primary",children:T}):e.jsxs(e.Fragment,{children:[r&&r.twoFA&&r.twoFA.enabled?e.jsx(S,{fullWidth:!0,label:"Confirm Password",type:u?"text":"password",value:t,onChange:_=>A({type:"SET_TWO_FA_SECRET",payload:_.target.value}),"aria-label":"Confirm password",disabled:d,InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(R,{onClick:Y,"aria-label":u?"Hide password":"Show password",edge:"end",children:u?e.jsx(X,{size:20}):e.jsx(j,{size:20})})})}}):e.jsx(S,{fullWidth:!0,label:"2FA Secret",type:u?"text":"password",value:t,onChange:_=>A({type:"SET_TWO_FA_SECRET",payload:_.target.value}),"aria-label":"2FA secret",disabled:d,InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(R,{onClick:Y,"aria-label":u?"Hide 2FA secret":"Show 2FA secret",edge:"end",children:u?e.jsx(X,{size:20}):e.jsx(j,{size:20})})})}}),(o||i)&&e.jsx(n,{variant:"caption",color:"error",children:o||(i==null?void 0:i.message)}),d&&e.jsx(n,{variant:"caption",color:"text.secondary",children:"Submitting..."})]})})}),e.jsx(O,{open:I,title:"Confirm 2FA Secret Update",onCancel:W,onConfirm:H,children:e.jsx(Z,{children:e.jsx(n,{variant:"body1",color:"text.primary",children:"Are you sure you want to update your 2FA secret? You will need to confirm your password."})})}),e.jsx(O,{open:$,title:"2FA Update Request",onCancel:L,onConfirm:L,children:e.jsxs(Z,{children:[e.jsx(n,{variant:"body1",color:"text.primary",children:q}),G&&e.jsx(n,{variant:"caption",color:"text.secondary",sx:{mt:2},children:"Requesting 2FA update..."})]})})]})},ge=({open:a,recoveryEmail:r,recoveryEmailError:t,dispatch:o,onCancel:y,onConfirm:T})=>e.jsx(O,{open:a,title:"Add Recovery Email",onCancel:y,onConfirm:T,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(S,{fullWidth:!0,label:"Recovery Email",type:"email",value:r,onChange:d=>o({type:"SET_RECOVERY_EMAIL",payload:d.target.value}),"aria-label":"Recovery email"}),t&&e.jsx(n,{variant:"caption",color:"error",children:t})]})}),De={isPaymentModalOpen:!1,isKycModalOpen:!1,isTwoFAModalOpen:!1,isTwoFAConfirmationModalOpen:!1,isRecoveryEmailModalOpen:!1,isDeleteModalOpen:!1,isPasswordConfirmModalOpen:!1,twoFAUpdateRequested:!1,passwordConfirmed:!1,password:"",passwordError:"",paymentType:"fiat",paymentCurrency:"",bankName:"",accountNumber:"",accountName:"",cryptoAddress:"",network:"",paymentError:"",kycDocumentType:"",documentFront:null,documentBack:null,addressProof:null,kycError:"",twoFASecret:"",twoFAError:"",twoFAResponseMessage:"",recoveryEmail:"",recoveryEmailError:"",editingPaymentDetail:null,deletingPaymentDetailId:null,showPassword:!1},be=(a,r)=>{switch(r.type){case"SET_PAYMENT_MODAL_OPEN":return{...a,isPaymentModalOpen:r.payload};case"SET_KYC_MODAL_OPEN":return{...a,isKycModalOpen:r.payload};case"SET_TWO_FA_MODAL_OPEN":return{...a,isTwoFAModalOpen:r.payload};case"SET_TWO_FA_CONFIRMATION_MODAL_OPEN":return{...a,isTwoFAConfirmationModalOpen:r.payload};case"SET_RECOVERY_EMAIL_MODAL_OPEN":return{...a,isRecoveryEmailModalOpen:r.payload};case"SET_DELETE_MODAL_OPEN":return{...a,isDeleteModalOpen:r.payload};case"SET_PASSWORD_CONFIRM_MODAL_OPEN":return{...a,isPasswordConfirmModalOpen:r.payload};case"SET_TWO_FA_UPDATE_REQUESTED":return{...a,twoFAUpdateRequested:r.payload};case"SET_PASSWORD_CONFIRMED":return{...a,passwordConfirmed:r.payload};case"SET_PASSWORD":return{...a,password:r.payload};case"SET_PASSWORD_ERROR":return{...a,passwordError:r.payload};case"SET_PAYMENT_TYPE":return{...a,paymentType:r.payload};case"SET_PAYMENT_CURRENCY":return{...a,paymentCurrency:r.payload};case"SET_BANK_NAME":return{...a,bankName:r.payload};case"SET_ACCOUNT_NUMBER":return{...a,accountNumber:r.payload};case"SET_ACCOUNT_NAME":return{...a,accountName:r.payload};case"SET_CRYPTO_ADDRESS":return{...a,cryptoAddress:r.payload};case"SET_NETWORK":return{...a,network:r.payload};case"SET_PAYMENT_ERROR":return{...a,paymentError:r.payload};case"SET_KYC_DOCUMENT_TYPE":return{...a,kycDocumentType:r.payload};case"SET_DOCUMENT_FRONT":return{...a,documentFront:r.payload};case"SET_DOCUMENT_BACK":return{...a,documentBack:r.payload};case"SET_ADDRESS_PROOF":return{...a,addressProof:r.payload};case"SET_KYC_ERROR":return{...a,kycError:r.payload};case"SET_TWO_FA_SECRET":return{...a,twoFASecret:r.payload};case"SET_TWO_FA_ERROR":return{...a,twoFAError:r.payload};case"SET_TWO_FA_RESPONSE_MESSAGE":return{...a,twoFAResponseMessage:r.payload};case"SET_RECOVERY_EMAIL":return{...a,recoveryEmail:r.payload};case"SET_RECOVERY_EMAIL_ERROR":return{...a,recoveryEmailError:r.payload};case"SET_EDITING_PAYMENT_DETAIL":return{...a,editingPaymentDetail:r.payload};case"SET_DELETING_PAYMENT_DETAIL_ID":return{...a,deletingPaymentDetailId:r.payload};case"SET_SHOW_PASSWORD":return{...a,showPassword:r.payload};case"RESET_PAYMENT_FORM":return{...a,paymentType:"fiat",paymentCurrency:"",bankName:"",accountNumber:"",accountName:"",cryptoAddress:"",network:"",paymentError:"",editingPaymentDetail:null};case"RESET_KYC_FORM":return{...a,kycDocumentType:"",documentFront:null,documentBack:null,addressProof:null,kycError:""};case"RESET_TWO_FA_FORM":return{...a,twoFASecret:"",twoFAError:"",twoFAResponseMessage:"",isTwoFAConfirmationModalOpen:!1};case"RESET_RECOVERY_EMAIL_FORM":return{...a,recoveryEmail:"",recoveryEmailError:""};case"RESET_PASSWORD_FORM":return{...a,password:"",passwordError:"",showPassword:!1};default:return a}},Ye=({user:a})=>{var ee,ae,te,oe,re;const r=ue(),[t,o]=M.useReducer(be,De),{callApi:y,loading:T,error:d}=z(),{callApi:i,loading:g,error:x}=z(),{callApi:A,loading:m}=z(),E=l=>{o({type:"SET_EDITING_PAYMENT_DETAIL",payload:l}),o({type:"SET_PAYMENT_TYPE",payload:l.type}),o({type:"SET_PAYMENT_CURRENCY",payload:l.currency}),l.type==="fiat"&&l.accountDetails?(o({type:"SET_BANK_NAME",payload:l.accountDetails.bankName||""}),o({type:"SET_ACCOUNT_NUMBER",payload:l.accountDetails.accountNumber||""}),o({type:"SET_ACCOUNT_NAME",payload:l.accountDetails.accountName||""})):l.type==="crypto"&&l.accountDetails&&(o({type:"SET_CRYPTO_ADDRESS",payload:l.accountDetails.address||""}),o({type:"SET_NETWORK",payload:l.accountDetails.network||""})),o({type:"SET_PAYMENT_MODAL_OPEN",payload:!0})},D=l=>{o({type:"SET_DELETING_PAYMENT_DETAIL_ID",payload:l}),o({type:"SET_DELETE_MODAL_OPEN",payload:!0})},u=()=>{o({type:"SET_DELETING_PAYMENT_DETAIL_ID",payload:null}),o({type:"SET_DELETE_MODAL_OPEN",payload:!1})},s=async()=>{if(t.deletingPaymentDetailId)try{const l=await y({url:`${k.PAYMENT_DETAILS}/delete/${t.deletingPaymentDetailId}`,method:"DELETE"});l.success?(r(_e(t.deletingPaymentDetailId)),u()):o({type:"SET_PAYMENT_ERROR",payload:l.message||"Failed to delete payment detail"})}catch{const p=(d==null?void 0:d.message)||"Failed to delete payment detail";o({type:"SET_PAYMENT_ERROR",payload:p})}},I=()=>o({type:"SET_PAYMENT_MODAL_OPEN",payload:!0}),b=()=>{o({type:"SET_PAYMENT_MODAL_OPEN",payload:!1}),o({type:"RESET_PAYMENT_FORM"})},q=()=>o({type:"SET_KYC_MODAL_OPEN",payload:!0}),P=()=>{o({type:"SET_KYC_MODAL_OPEN",payload:!1}),o({type:"RESET_KYC_FORM"})},$=()=>o({type:"SET_TWO_FA_MODAL_OPEN",payload:!0}),w=()=>{o({type:"SET_TWO_FA_MODAL_OPEN",payload:!1}),o({type:"RESET_TWO_FA_FORM"})},C=()=>{o({type:"SET_TWO_FA_CONFIRMATION_MODAL_OPEN",payload:!1}),o({type:"SET_TWO_FA_MODAL_OPEN",payload:!1}),o({type:"RESET_TWO_FA_FORM"})},G=()=>o({type:"SET_RECOVERY_EMAIL_MODAL_OPEN",payload:!0}),v=()=>{o({type:"SET_RECOVERY_EMAIL_MODAL_OPEN",payload:!1}),o({type:"RESET_RECOVERY_EMAIL_FORM"})},Y=()=>o({type:"SET_PASSWORD_CONFIRM_MODAL_OPEN",payload:!0}),W=()=>{o({type:"SET_PASSWORD_CONFIRM_MODAL_OPEN",payload:!1}),o({type:"RESET_PASSWORD_FORM"})},H=()=>{Y()},L=async()=>{if(!t.password){o({type:"SET_PASSWORD_ERROR",payload:"Please enter your password"});return}if(!(a!=null&&a._id)){o({type:"SET_PASSWORD_ERROR",payload:"User ID is not available"}),W();return}try{const l=await A({url:k.CONFIRM_PASSWORD,method:"POST",body:{userId:a._id,password:t.password}});l.success?(o({type:"SET_PASSWORD_CONFIRMED",payload:!0}),o({type:"SET_TWO_FA_MODAL_OPEN",payload:!0}),o({type:"SET_TWO_FA_UPDATE_REQUESTED",payload:!0}),W()):o({type:"SET_PASSWORD_ERROR",payload:l.message||"Invalid password"})}catch{const p=(d==null?void 0:d.message)||"Failed to confirm password";o({type:"SET_PASSWORD_ERROR",payload:p})}},_=()=>{o({type:"SET_SHOW_PASSWORD",payload:!t.showPassword})},se=()=>{if(!t.paymentCurrency)return o({type:"SET_PAYMENT_ERROR",payload:"Please select a currency"}),!1;if(!t.paymentType)return o({type:"SET_PAYMENT_ERROR",payload:"Please select a payment type"}),!1;if(t.paymentType==="fiat"){if(!t.bankName||!t.accountNumber||!t.accountName)return o({type:"SET_PAYMENT_ERROR",payload:"Please fill in all bank details"}),!1}else if(t.paymentType==="crypto"&&!t.cryptoAddress)return o({type:"SET_PAYMENT_ERROR",payload:"Please provide a crypto address"}),!1;return o({type:"SET_PAYMENT_ERROR",payload:""}),!0},de=()=>t.kycDocumentType?!t.documentFront||!t.documentBack||!t.addressProof?(o({type:"SET_KYC_ERROR",payload:"Please upload all required documents"}),!1):(o({type:"SET_KYC_ERROR",payload:""}),!0):(o({type:"SET_KYC_ERROR",payload:"Please select a document type"}),!1),ie=l=>l&&!t.twoFASecret?(o({type:"SET_TWO_FA_ERROR",payload:"Please enter a 2FA secret"}),!1):!l&&!t.twoFASecret?(o({type:"SET_TWO_FA_ERROR",payload:"Please enter your password"}),!1):(o({type:"SET_TWO_FA_ERROR",payload:""}),!0),ce=()=>t.recoveryEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.recoveryEmail)?(o({type:"SET_RECOVERY_EMAIL_ERROR",payload:""}),!0):(o({type:"SET_RECOVERY_EMAIL_ERROR",payload:"Please enter a valid email address"}),!1):(o({type:"SET_RECOVERY_EMAIL_ERROR",payload:"Please enter a recovery email"}),!1),pe=async()=>{var p;if(T||!se())return;if(!(a!=null&&a._id)){o({type:"SET_PAYMENT_ERROR",payload:"User ID is not available"});return}const l={userId:a._id,type:t.paymentType,currency:t.paymentCurrency,accountDetails:t.paymentType==="fiat"?{bankName:t.bankName,accountNumber:t.accountNumber,accountName:t.accountName,address:""}:{address:t.cryptoAddress,network:t.network===""?void 0:t.network}};try{const h=!!t.editingPaymentDetail,N=h?`${k.PAYMENT_DETAILS}/update/${(p=t.editingPaymentDetail)==null?void 0:p._id}`:k.addPaymentDetails,U=await y({url:N,method:h?"PUT":"POST",body:l});U.success&&U.paymentDetail?(r(Te(U.paymentDetail)),b()):o({type:"SET_PAYMENT_ERROR",payload:U.message||"Failed to save payment details"})}catch{const N=(d==null?void 0:d.message)||"Failed to save payment details";o({type:"SET_PAYMENT_ERROR",payload:N})}},ye=()=>{de()&&(console.log("KYC Submission:",{documentType:t.kycDocumentType,documentFront:t.documentFront,documentBack:t.documentBack,addressProof:t.addressProof}),P())},me=async()=>{if(g)return;if(!(a!=null&&a._id)){o({type:"SET_TWO_FA_ERROR",payload:"User ID is not available"});return}const l=!(a&&a.twoFA&&a.twoFA.enabled);if(ie(l))try{let p;if(l){const h={userId:a._id,secret:t.twoFASecret};p=await i({url:`${Q}/enable`,method:"POST",body:h}),p.success&&r(ne({enabled:!0,secret:t.twoFASecret}))}else{const h={userId:a._id,password:t.twoFASecret},N=await i({url:k.CONFIRM_PASSWORD,method:"POST",body:h});if(!N.success){o({type:"SET_TWO_FA_ERROR",payload:N.message||"Invalid password"});return}const le={userId:a._id};p=await i({url:`${Q}/disable`,method:"DELETE",body:le}),p.success&&r(ne({enabled:!1,secret:""}))}o({type:"SET_TWO_FA_RESPONSE_MESSAGE",payload:p.message||(l?"2FA enabled successfully":"2FA disabled successfully")}),o({type:"SET_TWO_FA_CONFIRMATION_MODAL_OPEN",payload:!0})}catch{const h=(x==null?void 0:x.message)||`Failed to ${l?"enable":"disable"} 2FA`;o({type:"SET_TWO_FA_ERROR",payload:h})}},Ee=()=>{ce()&&(console.log("Recovery Email:",t.recoveryEmail),v())};return e.jsxs(he,{sx:{padding:3,display:"flex",flexWrap:"wrap",gap:4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",borderRadius:2,backgroundColor:"background.paper"},children:[e.jsxs(c,{sx:{flex:{xs:"1 1 100%",md:"1 1 45%"},display:"flex",flexDirection:"column",gap:2,textAlign:"left"},children:[e.jsx(n,{variant:"h6",fontWeight:"medium",color:"text.primary",children:"Payment Details"}),a!=null&&a.paymentDetails&&a.paymentDetails.length>0?a.paymentDetails.map((l,p)=>e.jsxs(c,{sx:{p:2,border:"1px solid",borderColor:"grey.200",borderRadius:1,backgroundColor:"background.default",position:"relative"},children:[e.jsxs(c,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:[e.jsx(R,{onClick:()=>E(l),"aria-label":"Edit payment detail",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"},p:.5},children:e.jsx(xe,{size:16,style:{color:"grey.700"}})}),e.jsx(R,{onClick:()=>D(l._id),"aria-label":"Delete payment detail",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"},p:.5},children:e.jsx(Ae,{size:16,style:{color:"grey.700"}})})]}),e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Type:"})," ",l.type?l.type.charAt(0).toUpperCase()+l.type.slice(1):"N/A"]}),e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Currency:"})," ",l.currency?l.currency.toUpperCase():"N/A"]}),l.type==="fiat"&&l.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Bank:"})," ",l.accountDetails.bankName||"N/A"]}),e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Account Number:"})," ",l.accountDetails.accountNumber||"N/A"]}),e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Account Name:"})," ",l.accountDetails.accountName||"N/A"]})]}):l.type==="crypto"&&l.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Address:"})," ",l.accountDetails.address||"N/A"]}),e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Network:"})," ",l.accountDetails.network||"N/A"]})]}):e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Details:"})," N/A"]})]},l._id||p)):e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"No payment details provided yet."}),e.jsx(F,{variant:"contained",color:"primary",onClick:I,sx:{alignSelf:"flex-start",textTransform:"none",fontWeight:"medium",px:3,py:1},"aria-label":"Add payment details",children:"Add Payment Details"})]}),(a==null?void 0:a.paymentDetails)&&a.paymentDetails.length>0&&e.jsx(F,{variant:"contained",color:"primary",onClick:I,sx:{alignSelf:"flex-start",textTransform:"none",fontWeight:"medium",px:3,py:1},"aria-label":"Add payment details",children:"Add Payment Details"})]}),e.jsxs(c,{sx:{flex:{xs:"1 1 100%",md:"1 1 45%"},display:"flex",flexDirection:"column",gap:2,textAlign:"left"},children:[e.jsx(n,{variant:"h6",fontWeight:"medium",color:"text.primary",children:"Two-Factor Authentication"}),e.jsxs(n,{variant:"body2",fontWeight:"medium",children:[e.jsx("strong",{children:"Status:"})," ",(ee=a==null?void 0:a.twoFA)!=null&&ee.enabled?"Enabled":"Disabled"]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsx(F,{variant:"contained",color:"primary",onClick:$,sx:{textTransform:"none",fontWeight:"medium",px:3,py:1},"aria-label":(ae=a==null?void 0:a.twoFA)!=null&&ae.enabled?"Disable 2FA":"Enable 2FA",children:(te=a==null?void 0:a.twoFA)!=null&&te.enabled?"Disable 2FA":"Enable 2FA"}),((oe=a==null?void 0:a.twoFA)==null?void 0:oe.enabled)&&e.jsx(F,{variant:"outlined",color:"primary",onClick:H,sx:{textTransform:"none",fontWeight:"medium",px:3,py:1,color:"blue"},"aria-label":"Update 2FA Secret",children:"Update 2FA Secret"})]})]}),e.jsxs(c,{sx:{flex:{xs:"1 1 100%",md:"1 1 45%"},display:"flex",flexDirection:"column",gap:2,textAlign:"left"},children:[e.jsx(n,{variant:"h6",fontWeight:"medium",color:"text.primary",children:"KYC Details"}),(re=a==null?void 0:a.kyc)!=null&&re.status?e.jsxs(c,{sx:{p:2,border:"1px solid",borderColor:"grey.200",borderRadius:1,backgroundColor:"background.default"},children:[e.jsxs(n,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:[e.jsx("strong",{children:"Status:"})," ",a.kyc.status?a.kyc.status.charAt(0).toUpperCase()+a.kyc.status.slice(1):"N/A"]}),e.jsxs(n,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:[e.jsx("strong",{children:"Document Type:"})," ",a.kyc.documentType||"N/A"]}),a.kyc.documentFront&&e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body2",fontWeight:"medium",children:e.jsx("strong",{children:"Document Front:"})}),e.jsx(R,{href:a.kyc.documentFront,target:"_blank","aria-label":"View document front",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"},p:.5},children:e.jsx(j,{size:16,style:{color:"grey.700"}})})]}),a.kyc.documentBack&&e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body2",fontWeight:"medium",children:e.jsx("strong",{children:"Document Back:"})}),e.jsx(R,{href:a.kyc.documentBack,target:"_blank","aria-label":"View document back",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"},p:.5},children:e.jsx(j,{size:16,style:{color:"grey.700"}})})]}),a.kyc.addressProof&&e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body2",fontWeight:"medium",children:e.jsx("strong",{children:"Address Proof:"})}),e.jsx(R,{href:a.kyc.addressProof,target:"_blank","aria-label":"View address proof",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"},p:.5},children:e.jsx(j,{size:16,style:{color:"grey.700"}})})]})]}):e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"No KYC details provided."}),e.jsx(F,{variant:"contained",color:"primary",onClick:q,sx:{alignSelf:"flex-start",textTransform:"none",fontWeight:"medium",px:3,py:1},"aria-label":"Add KYC details",children:"Add KYC Details"})]})]}),e.jsxs(c,{sx:{flex:{xs:"1 1 100%",md:"1 1 45%"},display:"flex",flexDirection:"column",gap:2,textAlign:"left"},children:[e.jsx(n,{variant:"h6",fontWeight:"medium",color:"text.primary",children:"Recovery Email"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"No recovery email set."}),e.jsx(F,{variant:"contained",color:"primary",onClick:G,sx:{alignSelf:"flex-start",textTransform:"none",fontWeight:"medium",px:3,py:1},"aria-label":"Add recovery email",children:"Add Recovery Email"})]}),e.jsx(fe,{open:t.isPaymentModalOpen,editingPaymentDetail:t.editingPaymentDetail,paymentType:t.paymentType,paymentCurrency:t.paymentCurrency,bankName:t.bankName,accountNumber:t.accountNumber,accountName:t.accountName,cryptoAddress:t.cryptoAddress,network:t.network,paymentError:t.paymentError,loading:T,apiError:d,dispatch:o,onCancel:b,onConfirm:pe}),e.jsx(Re,{open:t.isDeleteModalOpen,paymentError:t.paymentError,onCancel:u,onConfirm:s}),e.jsx(Se,{open:t.isKycModalOpen,kycDocumentType:t.kycDocumentType,kycError:t.kycError,dispatch:o,onCancel:P,onConfirm:ye}),e.jsx(Oe,{open:t.isTwoFAModalOpen,user:a,twoFASecret:t.twoFASecret,twoFAError:t.twoFAError,showConfirmation:t.isTwoFAConfirmationModalOpen,responseMessage:t.twoFAResponseMessage,loading:g,apiError:x,showUpdateFlow:t.twoFAUpdateRequested,passwordConfirmed:t.passwordConfirmed,dispatch:o,onCancel:w,onConfirm:me,onConfirmationClose:C}),e.jsx(ge,{open:t.isRecoveryEmailModalOpen,recoveryEmail:t.recoveryEmail,recoveryEmailError:t.recoveryEmailError,dispatch:o,onCancel:v,onConfirm:Ee}),e.jsx(O,{open:t.isPasswordConfirmModalOpen,title:"Confirm Password",onCancel:W,onConfirm:L,children:e.jsxs(Z,{children:[e.jsx(n,{variant:"body1",color:"text.primary",children:"Please enter your password to proceed with updating your 2FA secret."}),e.jsx(S,{fullWidth:!0,label:"Password",type:t.showPassword?"text":"password",value:t.password,onChange:l=>o({type:"SET_PASSWORD",payload:l.target.value}),"aria-label":"Confirm password",disabled:m,error:!!t.passwordError,helperText:t.passwordError,InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(R,{onClick:_,"aria-label":t.showPassword?"Hide password":"Show password",edge:"end",children:t.showPassword?e.jsx(X,{size:20}):e.jsx(j,{size:20})})})}}),m&&e.jsx(n,{variant:"caption",color:"text.secondary",sx:{mt:2},children:"Verifying password..."})]})})]})};export{Ye as A};
